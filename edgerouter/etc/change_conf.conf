<?php
include_once("/www/common.php");

loadEnv();
$rule =  array (
/*public_ip => array (
    'desc' => "IP Publique",
    'valid' => "/^.*$/",
    'get_cmd' => '',
    'set_cmd' => ''
),*/
'vpn0'     => array (
    'desc' => "Serveur VPN",
    'valid' => "/^.*$/",
    'get_cmd' => "uci get openvpn.client.remote | awk '{print $1}'",
    'set_cmd' => 'uci set openvpn.client.remote="%1 1194"; uci commit',
    'service_restart' => '/etc/init.d/openvpn restart',
),
'gateway_id'   => array (
    'desc' => "Gateway Id (Splash)",
    'valid' => "/^.*$/",
    'wr_value' => "GTWNAME",
),
'duree_connexion'  => array (
    'desc' => "Durée de la connexion (en secondes)",
    'valid' => "/^.*$/",
    'wr_value' => "CTIMEOUT",
),
'gtwurl' => array (
    'desc' => "URL portail",
    'valid' => "/^.*$/",
    'wr_value' => "GTWURL",
),
'portal' => array (
    'desc' => "DNS du portal",
    'valid' => "/^.*$/",
    'wr_value' => "PORTAL",
),
'portalmode' => array (
    'desc' => "Mode du portal",
    'valid' => "/^.*$/",
    'wr_value' => "PORTALMODE",
    'php_restart' => 'wifi_rover_restart',
),
'proxy_actif'  => array (
    'desc' => "Proxy Actif ",
    'valid' => "/^.*$/",
    'wr_value' => "PROXYACTIVE",
    'php_restart' => 'wifi_rover_restart',
),
'proxy0' => array (
    'desc' => "Proxy",
    'valid' => "/^.*$/",
    'wr_value' => "PROXY",
    'php_restart' => 'wifi_rover_restart',
),
'logger0' => array (
    'desc' => "IP du Logger",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get logger0",
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set logger0 %1',
),
'rflow_port' => array (
    'desc' => "Port de log (Rflow_port)",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get rflow_port",
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set rflow_port %1',
),
'supra_whiteliste'  => array (
    'desc' => "SupraWhitelist",
    'valid' => "/^.*$/",
    'wl_value' => "SUPRAWHITELIST",
    'php_restart' => 'whitelist_restart',
),
'whiteliste'  => array (
    'desc' => "Whitelist",
    'valid' => "/^.*$/",
    'wl_value' => "WHITELIST",
    'php_restart' => 'whitelist_restart',
),
'whitelist_proxy'  => array (
    'desc' => "Whitelist avec proxy",
    'valid' => "/^.*$/",
    'wl_value' => "WHITELIST_PROXY",
    'php_restart' => 'whitelist_restart',
),
'blackliste'  => array (
    'desc' => "blacklist",
    'valid' => "/^.*$/",
    'wl_value' => "BLACKLIST",
    'php_restart' => 'whitelist_restart',
),
'unifi0' => array (
    'desc' => "Controleur Unifi ",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get unifi0",
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set unifi0 %1',
    'php_restart' => 'wifi_rover_restart',
),
'start'  => array (
    'desc' => "Démarrage du portail",
    'valid' => "/^.*$/",
    'get_cmd' => "awk '/\/etc\/init.d\/wifi_rover start/  { printf \"%d:%02d\", $2, $1}' /etc/crontabs/root",
    'set_cmd' => '/sbin/set_wr_cron start %1',
    'service_restart' => '/etc/init.d/cron restart',
),
'stop'   => array (
    'desc' => "Arrêt du portail",
    'valid' => "/^.*$/",
    'get_cmd' => "awk '/\/etc\/init.d\/wifi_rover stop/  { printf \"%d:%02d\", $2, $1}' /etc/crontabs/root",
    'set_cmd' => '/sbin/set_wr_cron stop %1',
    'service_restart' => '/etc/init.d/cron restart',
),
'single_session' => array (
    'desc' => "Single Session",
    'valid' => "/^.*$/",
    'wr_value' => "SINGLESESSION",
),
'autowhitelist_lease' => array (
    'desc' => "Duree auto whitelist",
    'valid' => "/^.*$/",
    'wr_value' => "AUTOWHITELIST",
),

'hostname' => array (
    'desc' => "nom de la machine",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get hostname",
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set hostname %1',
),

'alias_borne'  => array (
    'desc' => "Alias de la borne",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get alias_borne " . GTWADDR,
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set alias_borne %1 ' . GTWADDR,
),

'ref_mag'   => array (
    'desc' => "Reference MAGASIN",
    'valid' => "/^.*$/",
    'wr_value' => "STOREID",
),

'dhcp_lease' => array (
    'desc' => "duree du bail",
    'valid' => "/^.*$/",
    'get_cmd' => "sudo /config/scripts/wifi_rover/config get dhcp_lease",
    'set_cmd' => 'sudo /config/scripts/wifi_rover/config set dhcp_lease %1',
),

'corporate_network' => array (
    'desc' => "Reseau Corporate",
    'valid' => "/^.*$/",
    'wr_value' => "CORPORATENET",
    'php_restart' => 'wifi_rover_restart',
),

'corporate_proxy' => array (
    'desc' => "Reseau Corporate derriere proxy",
    'valid' => "/^.*$/",
    'wr_value' => "CORPORATEPROXY",
    'php_restart' => 'wifi_rover_restart',
),
'corpif' => array (
    'desc' => "Interface du réseau Corporate",
    'valid' => "/^.*$/",
    'wr_value' => "CORPIF",
    'php_restart' => 'wifi_rover_restart',
),
'lan_iface' => array (
    'desc' => "Interface du réseau Captif",
    'valid' => "/^.*$/",
    'wr_value' => "LANIF",
    'php_restart' => 'wifi_rover_restart',
),
'wanif' => array (
    'desc' => "Interface du réseau sortant",
    'valid' => "/^.*$/",
    'wr_value' => "WANIF",
    'php_restart' => 'wifi_rover_restart',
),
'lan_gateway' => array (
    'desc' => "Adresse IP LAN envoyée au portail",
    'valid' => "/^.*$/",
    'wr_value' => "GTW",
    'php_restart' => 'wifi_rover_restart',
),
);
